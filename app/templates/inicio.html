{% extends "layouts/app.html" %}
{% block title %}Início{% endblock %}

{% block page_title %}
<div class="d-flex align-items-center w-100">
  <span class="me-auto">
    WorkCost · Início
  </span>

  <div class="ms-auto d-flex gap-2">

    <button class="btn btn-outline-purple"
            type="button"
            onclick="toggleFullscreen()">
      <i class="bi bi-arrows-fullscreen"></i>
    </button>

    <a href="{{ url_for('auth.logout') }}"
       class="btn btn-outline-danger">
      <i class="bi bi-box-arrow-right"></i> Sair
    </a>

  </div>
</div>
{% endblock %}

{% block content %}

<div class="container-fluid">

  <div class="card shadow-sm p-4 mb-4">
    <h4 class="fw-bold mb-2">
      Bem-vindo, {{ current_user.full_name or current_user.username }}
    </h4>

    <p class="text-muted mb-0">
      O <strong>WorkCost</strong> é o sistema corporativo para controle,
      aprovação e gestão de horas extras.
      Aqui você pode registrar solicitações, acompanhar aprovações
      e visualizar suas próprias extras.
    </p>
  </div>

  <div class="card shadow-sm p-4 mb-4">
    <h5 class="fw-bold mb-3">
      Como funciona o fluxo de aprovação
    </h5>

    <ol class="mb-0">
      <li>
        <strong>Solicitação criada</strong> pelo solicitante autorizado.
      </li>
      <li>
        Funcionários listados confirmam presença com matrícula e senha.
      </li>
      <li>
        A solicitação passa pelas aprovações:
        <strong>Gestor → Gerente → Controladoria → Diretoria → RH</strong>.
      </li>
      <li>
        Após todas as assinaturas, a solicitação é considerada
        <span class="badge bg-success">Confirmada</span>.
      </li>
    </ol>
  </div>

  {% if current_user.is_admin %}

  <div class="card shadow-sm p-4 mb-4 border-primary">
    <h5 class="fw-bold text-primary mb-3">
      Seu perfil: Administrador
    </h5>

    <p>
      Como administrador, você possui acesso completo ao sistema:
    </p>

    <ul>
      <li><strong>Solicitações</strong> — Criar novas extras.</li>
      <li><strong>Pedidos</strong> — Visualizar todas as solicitações abertas.</li>
      <li><strong>Minhas Extras</strong> — Acompanhar extras vinculadas à sua matrícula.</li>
      <li><strong>Dashboard</strong> — Visualizar indicadores estratégicos.</li>
      <li><strong>Gestão de usuários</strong> — Aprovar e gerenciar acessos.</li>
    </ul>

    <div class="mt-3 d-flex gap-2 flex-wrap">
      <a href="{{ url_for('pages.solicitacoes') }}"
         class="btn btn-outline-primary">
        Criar Solicitação
      </a>

      <a href="{{ url_for('pages.pedidos') }}"
         class="btn btn-outline-secondary">
        Ver Pedidos
      </a>

      <a href="{{ url_for('pages.dashboard') }}"
         class="btn btn-outline-success">
        Acessar Dashboard
      </a>
    </div>
  </div>

  {% elif current_user.extra_authorized %}

  <div class="card shadow-sm p-4 mb-4 border-success">
    <h5 class="fw-bold text-success mb-3">
      Seu perfil: Autorizado para Extra
    </h5>

    <p>
      Você está habilitado para criar e gerenciar solicitações de horas extras.
    </p>

    <ul>
      <li><strong>Solicitações</strong> — Criar novas solicitações.</li>
      <li><strong>Minhas Extras</strong> — Acompanhar extras vinculadas à sua matrícula.</li>
      <li><strong>Dashboard</strong> — Visualizar indicadores.</li>
    </ul>

    <div class="mt-3 d-flex gap-2 flex-wrap">
      <a href="{{ url_for('pages.solicitacoes') }}"
         class="btn btn-outline-primary">
        Criar Solicitação
      </a>

      <a href="{{ url_for('pages.minhas_extras') }}"
         class="btn btn-outline-secondary">
        Minhas Extras
      </a>
    </div>
  </div>

  {% else %}

  <div class="card shadow-sm p-4 mb-4 border-secondary">
    <h5 class="fw-bold text-secondary mb-3">
      Seu perfil: Colaborador
    </h5>

    <p>
      Como colaborador, você pode:
    </p>

    <ul>
      <li><strong>Pedidos</strong> — Visualizar solicitações onde você está listado.</li>
      <li><strong>Minhas Extras</strong> — Acompanhar status das suas horas extras.</li>
      <li>Confirmar presença nas solicitações utilizando sua matrícula e senha.</li>
    </ul>

    <div class="mt-3 d-flex gap-2 flex-wrap">
      <a href="{{ url_for('pages.pedidos') }}"
         class="btn btn-outline-primary">
        Ver Pedidos
      </a>

      <a href="{{ url_for('pages.minhas_extras') }}"
         class="btn btn-outline-secondary">
        Minhas Extras
      </a>
    </div>
  </div>

  {% endif %}

  <div class="card shadow-sm p-4">
    <h6 class="fw-bold mb-2">
      Orientações importantes
    </h6>

    <ul class="mb-0 text-muted">
      <li>
        A confirmação do colaborador formaliza ciência da solicitação.
      </li>
      <li>
        Apenas usuários autorizados podem criar novas solicitações.
      </li>
      <li>
        Todas as aprovações ficam registradas com usuário e data.
      </li>
      <li>
        As solicitações foram ajustadas para manter o formato completo do documento,
        inclusive quando acessadas pelo celular, permitindo visualizar toda a estrutura
        sem alteração de layout.
      </li>
      <li>
        Para uma visualização ainda mais fiel ao formato original,
        recomenda-se utilizar a opção <strong>"Site para computador"</strong>
        disponível no navegador (como no Google Chrome).
      </li>
      <li>
        Em caso de inconsistência, procure o administrador do sistema.
      </li>
    </ul>
  </div>

</div>

{% endblock %}
