<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Documento Solicitação #{{ solicitacao.id }}</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 40px;
}

h2 {
  text-align: center;
  margin-bottom: 20px;
}

.section {
  margin-bottom: 30px;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

table, th, td {
  border: 1px solid #000;
}

th, td {
  padding: 6px;
  text-align: center;
}

.print-header {
  text-align: center;
  margin-bottom: 20px;
}

@media print {
  button {
    display: none;
  }
}
</style>
</head>

<body>

<div class="print-header">
  <h2>FORMULÁRIO DE CONTROLE DE EXTRA JORNADA</h2>
  <strong>ID:</strong> {{ solicitacao.id }}
</div>

<div class="section">
  <strong>Data:</strong> {{ solicitacao.data.strftime("%d/%m/%Y") }}<br>
  <strong>Execução:</strong>
  {{ solicitacao.data_execucao.strftime("%d/%m/%Y") if solicitacao.data_execucao else "-" }}<br>
  <strong>Turno:</strong> {{ solicitacao.turnos }}<br>
  <strong>Setores:</strong> {{ solicitacao.setores }}<br>
  <strong>Clientes:</strong> {{ solicitacao.cliente }}<br>
  <strong>Descrição:</strong> {{ solicitacao.descricao }}<br>
  <strong>Atividades:</strong> {{ solicitacao.atividades }}
</div>

<div class="section">
  <h4>Funcionários</h4>
  <table>
    <thead>
      <tr>
        <th>Matrícula</th>
        <th>Nome</th>
        <th>Início</th>
        <th>Término</th>
        <th>Transporte</th>
        <th>Assinatura</th>
      </tr>
    </thead>
    <tbody>
      {% for f in funcionarios %}
      <tr>
        <td>{{ f.matricula }}</td>
        <td>{{ f.nome }}</td>
        <td>{{ f.inicio }}</td>
        <td>{{ f.termino }}</td>
        <td>{{ f.transporte }}</td>
        <td>
          {% if f.signed_at %}
            {{ f.signed_by }}
          {% else %}
            Pendente
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="section">
  <h4>Provisão de Gastos</h4>
  <table>
    <thead>
      <tr>
        <th>Matrícula</th>
        <th>Nome</th>
        <th>Horas</th>
        <th>Noturnas</th>
        <th>Refeição</th>
        <th>Transporte</th>
        <th>Adic. Noturno</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      {% for f in provisao_funcionarios %}
      <tr>
        <td>{{ f.matricula }}</td>
        <td>{{ f.nome }}</td>
        <td>{{ f.horas_total }}</td>
        <td>{{ f.horas_noturnas }}</td>
        <td>{{ f.custo_refeicao }}</td>
        <td>{{ f.custo_transporte }}</td>
        <td>{{ f.adicional_noturno }}</td>
        <td>{{ f.total }}</td>
      </tr>
      {% endfor %}
      <tr>
        <td colspan="7"><strong>Total Geral</strong></td>
        <td><strong>{{ total_geral }}</strong></td>
      </tr>
    </tbody>
  </table>
</div>

</body>
</html>
